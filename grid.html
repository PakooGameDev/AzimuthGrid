<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zone Grid</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="zoneCanvas" width="800" height="800"></canvas>
    <script>
		const canvas = document.getElementById('zoneCanvas');
const ctx = canvas.getContext('2d');

const width = canvas.width;
const height = canvas.height;



const centerX = width / 2;
const centerY = height / 2;

const zones = [
    { type: 'G', lat: 10, lon: 180, startLat: 90, endLat: 80 },
    { type: 'C', lat: 8, lon: 36, startLat: 80, endLat: 72 },
    { type: 'B', lat: 16, lon: 18, startLat: 72, endLat: 40 },
    { type: 'A', lat: 20, lon: 18, startLat: 40, endLat: 0 }
];

function drawPoint(lat, lon) {
    // Преобразование координат точки в координаты на канвасе
    const radius = ((90 - lat) / 90) * (height / 2);
    const angle = ((180 - lon) / 180) * Math.PI;
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);

    ctx.beginPath();
    ctx.arc(x, y, 5, 0, 2 * Math.PI, false);
    ctx.fillStyle = 'red';
    ctx.fill();
    ctx.stroke();
}

drawPoint(52.4, 29.10);

function drawZone(latStart, latEnd, lonStart, lonEnd, zoneNumber, type) {
    const radiusStart = ((90 - latStart) / 90) * (height / 2);
    const radiusEnd = ((90 - latEnd) / 90) * (height / 2);
    const startAngle = ((180 - lonStart) / 180) * Math.PI;
    const endAngle = ((180 - lonEnd) / 180) * Math.PI;

    ctx.beginPath();
    ctx.arc(centerX, centerY, radiusStart, startAngle, endAngle, true);
    ctx.arc(centerX, centerY, radiusEnd, endAngle, startAngle, false);
    ctx.closePath();

    switch (type) {
        case 'A':
            ctx.fillStyle = 'rgba(255, 0, 0, 0.5)';
            break;
        case 'B':
            ctx.fillStyle = 'rgba(0, 255, 0, 0.5)';
            break;
        case 'C':
            ctx.fillStyle = 'rgba(0, 0, 255, 0.5)';
            break;
        case 'G':
            ctx.fillStyle = 'rgba(255, 255, 0, 0.5)';
            break;
    }

    ctx.fill();
    ctx.stroke();

    const labelX = centerX + (radiusStart + radiusEnd) / 2 * Math.cos((startAngle + endAngle) / 2);
    const labelY = centerY + (radiusStart + radiusEnd) / 2 * Math.sin((startAngle + endAngle) / 2);

    ctx.fillStyle = 'black';
    ctx.fillText(zoneNumber, labelX, labelY);
}

function drawZones() {
    let zoneNumberEast = 1; // Начальный номер для восточного полушария
    let zoneNumberWest = 51; // Начальный номер для западного полушария

    zones.forEach(zone => {
        const { lat, lon, startLat, endLat, type } = zone;

        for (let latStart = startLat; latStart > endLat; latStart -= lat) {
            const latEnd = Math.max(latStart - lat, endLat);

            for (let lonStart = -180; lonStart < 180; lonStart += lon) {
                const lonEnd = lonStart + lon;
               const isEast = lonStart >= 0 && lonEnd <= 180;
                 const zoneNumber = isEast ? zoneNumberEast++ : zoneNumberWest++;
                drawZone(latStart, latEnd, lonStart, lonEnd, zoneNumber, type);
                if (zoneNumberEast > 46) zoneNumberEast = 1;
                if (zoneNumberWest > 96) zoneNumberWest = 51;
            }
        }
    });
}

drawZones();
	</script>
</body>
</html>

https://help.gisserver.ru/ru/gridpvo/index.html
